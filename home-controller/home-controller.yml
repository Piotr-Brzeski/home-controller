targetTemplates:
  link-coap:
    settings:
      OTHER_LDFLAGS:
        - -lcoap-3-openssl
        - -lssl
  link-mosquitto:
    settings:
      OTHER_LDFLAGS:
        - -lmosquitto
targets:
  home-controller:
    platform: macOS
    type: tool
    templates:
      - link-curl-ws
      - link-coap
      - link-mosquitto
    dependencies:
      - target: home-link
        link: true
      - target: cpp-ikea
        link: true
      - target: cpp-coap
        link: true
      - target: cpp-network
        link: true
      - target: data-format
        link: true
      - target: cpp-log
        link: true
    settings:
      HEADER_SEARCH_PATHS:
        - /opt/homebrew/include
        - ${SRCROOT}/home-link
        - ${SRCROOT}/cpp-ikea
        - ${SRCROOT}/cpp-network
        - ${SRCROOT}/cpp-data-format
        - ${SRCROOT}/cpp-log
      LIBRARY_SEARCH_PATHS:
        - /opt/homebrew/lib
      _LINUX_OTHER_LDFLAGS:
        -lcoap-3-gnutls
        -lcurl
    sources:
      - path: configuration.cpp
        group: home-controller
      - path: configuration.h
        group: home-controller
        buildPhase: none
      - path: controller.cpp
        group: home-controller
      - path: controller.h
        group: home-controller
        buildPhase: none
      - path: exception.h
        group: home-controller
        buildPhase: none
      - path: group.cpp
        group: home-controller
      - path: group.h
        group: home-controller
        buildPhase: none
      - path: home-controller.cpp
        group: home-controller
      - path: json.h
        group: home-controller
        buildPhase: none
      - path: mqtt.cpp
        group: home-controller
      - path: mqtt.h
        group: home-controller
        buildPhase: none
      - path: mqtt_bulb.cpp
        group: home-controller
      - path: mqtt_bulb.h
        group: home-controller
        buildPhase: none
      - path: mqtt_system.cpp
        group: home-controller
      - path: mqtt_system.h
        group: home-controller
        buildPhase: none
